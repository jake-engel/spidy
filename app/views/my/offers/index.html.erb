<% fromFreelancers = @offers.select do |offer| %>
<% offer.status != 3 && offer.status != 0 && offer.freelancer.user == current_user %>
<% end %>
<% toFreelancers = @offers.select do |offer| %>
<% offer.status != 3 && offer.status != 0 && offer.user == current_user %>
<% end %>
<!--
  MUST CHECK THIS LATER AND CORRECT PUNDIT WITH NAMESPACE
<%= toFreelancers.length %>
<%= fromFreelancers.length %>
<%= @offers.length %>
-->

<% if current_user.has_freelancer %>
  <div class="tab">
    <%= render "shared/tab" %>
  </div>
  <div class="offer-card-from-freelancer">
    <h3>
      <%= "You Have No Pending Offers From Freelancers" if fromFreelancers.empty? %>
    </h3>
    <% fromFreelancers.each do |offer| %>
      <strong>FROM:</strong> <%= offer.user.first_name %> <br>
      <strong>Current Price: </strong> <%= offer.freelancer.currency %> <%= offer.price %>/<%= offer.price_unit %> <br>
      <strong>Status: </strong> <%= status(offer) %> <br>
      <strong>Job Description: </strong> <%= offer.description %><br>
      <% if offer.status == 1 %>
        <%= link_to accept_my_offer_path( offer ), method: :patch do  %>
          <button type="hire" class="btn btn-success">Accept Offer</button>
        <% end %>
      <% end %>
      <% if offer.status == 1 %>
        <%= link_to decline_my_offer_path( offer ), method: :patch do  %>
          <button type="hire" class="btn btn-danger">Decline Offer</button>
        <% end %>
      <% end %>
      <br><br>
    <% end %>
  </div>

  <div class="offer-card-to-freelancer hidden">
    <h3>
      <%= "You Have No Pending Offers To Freelancers" if toFreelancers.empty? %>
    </h3>
    <% toFreelancers.each do |offer| %>
      <strong>FREELANCER:</strong> <%= offer.freelancer.user.first_name %> <br>
      <strong>Current Price: </strong> <%= offer.freelancer.currency %> <%= offer.price %>/<%= offer.price_unit %> <br>
      <strong>Your Budget: </strong> <%= offer.freelancer.currency %> <%= offer.budget %><br>
      <strong>Status: </strong> <%= status(offer) %> <br>
      <strong>Job Description: </strong> <%= offer.description %> <br>
      <% if offer.status == 2 %>
        <%= link_to complete_my_offer_path( offer ), method: :patch do  %>
          <button type="hire" class="btn btn-primary">Offer Completed</button>
        <% end %>
      <% end %>
      <br><br>
    <% end %>
  </div>
<% else %>
  <h3>
    <%= "You Have No Pending Offers To Freelancers" if toFreelancers.empty? %>
  </h3>
  <% toFreelancers.each do |offer| %>
    <strong>FREELANCER:</strong> <%= offer.freelancer.user.first_name %>(<%= offer.freelancer.position %>) <br>
    <strong>Current Price: </strong> <%= offer.freelancer.currency %> <%= offer.price %>/<%= offer.price_unit %> <br>
    <strong>Your Budget: </strong> <%= offer.freelancer.currency %> <%= offer.budget %><br>
    <strong>Status: </strong> <%= status(offer) %> <br>
    <strong>Job Description: </strong> <%= offer.description %> <br>
    <% if offer.status == 2 %>
        <%= link_to complete_my_offer_path( offer ), method: :patch do  %>
          <button type="hire" class="btn btn-primary">Offer Completed</button>
        <% end %>
      <% end %>
    <br><br>
  <% end %>
<% end %>

